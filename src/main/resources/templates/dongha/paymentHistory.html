<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/layout/layout}">
<head>
    <meta charset="UTF-8">
    <title>Page without Aside</title>
</head>
<body>
<!-- aside (ë¹„ì›Œë‘  ë²„ì „) -->
<th:block layout:fragment="aside">
    <!-- asideê°€ ì—†ëŠ” ê²½ìš° ì§€ìš°ì§€ë§ê³  fragment aside ì§€ìš°ì§€ ë§ê³  ê°€ë§Œë‘ì„¸ìš” -->
</th:block>

<!-- content -->
<div layout:fragment="content">
    <!--ìŠ¤íƒ€ì¼ì€ í¬ê¸°ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•¨ì…ë‹ˆë‹¤ ì§€ìš°ì‹œê³  ì‘ì—…í•˜ì‹œë©´ ë©ë‹ˆë‹¤-->
    <h1>ê²°ì œ ë‚´ì—­</h1>
    <table>
        <thead>
        <tr>
            <th>ê°•ì˜ ì œëª©</th>
            <th>ê²°ì œ ì¼ì‹œ</th>
            <th>ê²°ì œ ê¸ˆì•¡</th>
            <th>í™˜ë¶ˆ ìƒíƒœ</th>
        </tr>
        </thead>
        <tbody id="payment-table">
        </tbody>
    </table>
</div>
</body>

<!--ì´ê±°ë°–ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±í•˜ë©´ ì•ˆëŒì•„ê°‘ë‹ˆë‹¤...-->
<div layout:fragment="scripts">
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            axios.get("/payment-api/history")
                .then(response => {
                    let payments = response.data;
                    let tableBody = document.getElementById("payment-table");

                    payments.forEach(payment => {
                        let row = `<tr>
                    <td>${payment.classTitle}</td>
                    <td>${payment.paymentDate}</td>
                    <td>â‚©${payment.price.toLocaleString()}</td>
                    <td>${payment.refundStatus}</td>
                </tr>`;
                        tableBody.innerHTML += row;
                    });
                })
                .catch(error => {
                    console.error("ğŸš¨ ê²°ì œ ë‚´ì—­ ì¡°íšŒ ì‹¤íŒ¨:", error);
                });
        });
    </script>
</div>
</html>
